@{
    ViewBag.Title = "Thống kê báo cáo";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var topMovies = ViewBag.TopMovies;
    var topViews = ViewBag.TopViews;
    var topFavorites = ViewBag.TopFavorites;
}

<div class="container mt-4">
    <h2>📊 Thống kê báo cáo</h2>
    <a href="@Url.Action("Dashboard", "Admin")" class="btn btn-secondary mb-3">⬅️ Quay lại</a>

    <!-- ⭐ Top 5 phim được đánh giá cao nhất -->
    <h4>⭐ Top 5 phim được đánh giá cao nhất</h4>
    <table class="table table-hover table-bordered">
        <thead class="table-dark">
            <tr><th>Tên phim</th><th>Điểm trung bình</th><th>Số lượt đánh giá</th></tr>
        </thead>
        <tbody>
            @foreach (var m in topMovies)
            {
                <tr>
                    <td>@m.MovieTitle</td>
                    <td>@String.Format("{0:0.0}", m.AvgRating)</td>
                    <td>@m.Count</td>
                </tr>
            }
        </tbody>
    </table>

    <!-- 👀 Top 5 phim nhiều lượt xem nhất -->
    <h4>👀 Top 5 phim nhiều lượt xem nhất</h4>
    <table class="table table-hover table-bordered">
        <thead class="table-dark">
            <tr><th>Tên phim</th><th>Số lượt xem</th></tr>
        </thead>
        <tbody>
            @foreach (var v in topViews)
            {
                <tr>
                    <td>@v.MovieTitle</td>
                    <td>@v.Views</td>
                </tr>
            }
        </tbody>
    </table>

    <!-- ❤️ Top 5 phim nhiều lượt yêu thích nhất -->
    <h4>❤️ Top 5 phim nhiều lượt yêu thích nhất</h4>
    <table class="table table-hover table-bordered">
        <thead class="table-dark">
            <tr><th>Tên phim</th><th>Số lượt yêu thích</th></tr>
        </thead>
        <tbody>
            @foreach (var f in topFavorites)
            {
                <tr>
                    <td>@f.MovieTitle</td>
                    <td>@f.Favorites</td>
                </tr>
            }
        </tbody>
    </table>
</div>
